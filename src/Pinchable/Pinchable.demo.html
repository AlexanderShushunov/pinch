<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no" />
        <link href="/style.css" rel="stylesheet" />
        <title>Pinchable</title>
        <style>
            .pinchable-container {
                box-sizing: border-box;
                width: 100%;
                height: 450px;
                border: 5px dashed #3f3ff8;
                background:
                    repeating-linear-gradient(90deg, blue 0 2px, transparent 2px 25px),
                    repeating-linear-gradient(0deg, blue 0 2px, transparent 2px 25px),
                    radial-gradient(closest-side, #3f87a6, #ebf8e1, #f69d3c);
                background-blend-mode: normal;
            }

            .controls {
                z-index: 1;
                position: relative;
                margin: 10px 0;
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }

            .settings {
                display: flex;
                flex-direction: column;
                gap: 5px;
                margin: 10px 0 20px 0;
            }

            .setting-row {
                display: flex;
                align-items: center;
                gap: 10px;
            }
        </style>
    </head>
    <body>
        <article>
            <header>
                <h1>Pinchable</h1>
                <p>
                    Wrap any HTML element to make it <em>pinch-zoomable</em> and pannable on mobile — no dependencies.
                </p>
            </header>

            <h2>Key features</h2>
            <ul>
                <li>Natural pinch-zoom — the point between your fingers stays anchored.</li>
                <li>Drop-in wrapper for any element.</li>
                <li>
                    Configurable <code>maxZoom</code>, pinch <code>velocity</code> (sensitivity), and transition
                    <code>applyTime</code>.
                </li>
                <li>Smart edges — content clamps to bounds; tiny reverse motions near edges don’t jitter.</li>
                <li>Max-zoom hysteresis — small reverse motions after hitting the limit won’t snap out.</li>
                <li>
                    Programmatic <code>focus()</code> to smoothly zoom to a target point using normalized [0..1]
                    coordinates; temporarily disables manual gestures while applying.
                </li>
                <li>Enable/disable gestures on the fly; clean teardown.</li>
            </ul>

            <h3>Behavior tips</h3>
            <ul>
                <li>
                    Hit max zoom, then separate your fingers a lot and start bringing them closer — zoom-out will kick
                    in smoothly after a small threshold, not instantly.
                </li>
                <li>
                    Pan to an edge until movement stops, move a bit farther in the same direction, then reverse — the
                    element starts moving back almost immediately (no sticky edge feel).
                </li>
            </ul>

            <div class="settings">
                <div class="setting-row">
                    <label for="maxZoom">Max Zoom:</label>
                    <input type="range" id="maxZoom" value="2.5" min="1" max="10" step="0.1" />
                    <span id="maxZoomValue">2.5</span>
                </div>
                <div class="setting-row">
                    <label for="minZoom">Min Zoom:</label>
                    <input type="range" id="minZoom" value="0.5" min="0.1" max="1" step="0.1" />
                    <span id="minZoomValue">1</span>
                </div>
                <div class="setting-row">
                    <label for="velocity">Velocity:</label>
                    <input type="range" id="velocity" value="0.7" min="0.1" max="2" step="0.1" />
                    <span id="velocityValue">0.7</span>
                </div>
                <div class="setting-row">
                    <label for="applyTime">Apply Time (ms):</label>
                    <input type="range" id="applyTime" value="400" min="100" max="2000" step="50" />
                    <span id="applyTimeValue">400</span>
                </div>
                <div class="setting-row">
                    <label for="zoomThreshold">Zoom Threshold:</label>
                    <input type="range" id="zoomThreshold" value="0.2" min="0" max="0.5" step="0.01" />
                    <span id="zoomThresholdValue">0.2</span>
                </div>
                <div class="setting-row">
                    <label for="shiftThreshold">Shift Threshold:</label>
                    <input type="range" id="shiftThreshold" value="10" min="0" max="50" step="1" />
                    <span id="shiftThresholdValue">10</span>
                </div>
            </div>

            <div class="controls">
                <button id="disableButton">Disable</button>
                <button id="enableButton">Enable</button>
                <button id="resetButton">Reset</button>
                <button id="movePoint1">Move to (0.2, 0.5)</button>
                <button id="movePoint2">Move to (0.9, 0.8)</button>
                <button id="movePoint3">Move to (0.5, 0.1)</button>
                <button id="movePoint4">Move to (0.4, 0.7)</button>
                <button id="zoomLessThanOne">Zoom less than 1</button>
            </div>
        </article>
        <div class="pinchable-container" id="pinchContainer"></div>

        <script type="module" src="./Pinchable.demo.ts"></script>
    </body>
</html>
